@import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');

:root{
  --font-base:16px;
  --font-family:'Roboto',sans-serif;
  --color-bg:#f0f5f7;
  --color-panel:#2f3e48;
  --color-primary:#38b2ac;
  --color-primary-hover:#2d9c94;
  --radius:6px;
  --shadow:0 4px 8px rgba(0,0,0,.3);
  --color-text:#fff;
}

html.theme-light{
  --color-bg:#f0f5f7;
  --color-panel:#2f3e48;
  --color-primary:#38b2ac;
  --color-primary-hover:#2d9c94;
  --color-text:#fff;
}

html.theme-dark{
  --color-bg:#1e1e1e;
  --color-panel:#222831;
  --color-primary:#4b86c2;
  --color-primary-hover:#3b6e9b;
  --color-text:#fff;
}

html,body{
  margin:0;
  height:100%;
  font-family:var(--font-family);
  font-size:var(--font-base);
}

/* плавные скроллбары */
::-webkit-scrollbar{
  width:8px;
  height:8px;
}
::-webkit-scrollbar-track{
  background:var(--color-panel);
  border-radius:var(--radius);
}
::-webkit-scrollbar-thumb{
  background:var(--color-primary);
  border-radius:var(--radius);
  transition:background-color .2s;
}
::-webkit-scrollbar-thumb:hover{
  background:var(--color-primary-hover);
}

#canvas{
  height:calc(100vh - 3.375rem);
  background:var(--color-bg);
  margin:10px;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
}

#gridOverlay{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:2;
  background-image:
    repeating-linear-gradient(to right, rgba(0,0,0,.1) 0 1px, transparent 1px),
    repeating-linear-gradient(to bottom, rgba(0,0,0,.1) 0 1px, transparent 1px);
  background-size:20px 20px;
}

#rulers{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:3;
  font-size:10px;
}
#rulerH{
  position:absolute;
  left:0;
  right:0;
  height:20px;
  background:repeating-linear-gradient(to right, #ccc 0 1px, transparent 1px 10px);
  border-bottom:1px solid #ccc;
}
#rulerV{
  position:absolute;
  top:0;
  bottom:0;
  width:20px;
  background:repeating-linear-gradient(to bottom, #ccc 0 1px, transparent 1px 10px);
  border-right:1px solid #ccc;
}
.guide-line{
  position:absolute;
  background:red;
  pointer-events:none;
  display:none;
  z-index:4;
}
#guideH{height:1px;left:0;right:0;}
#guideV{width:1px;top:0;bottom:0;}

.btn{
  background:var(--color-primary);
  color:var(--color-text);
  border:none;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  cursor:pointer;
  transition:background-color .2s;
}
.btn:hover{background:var(--color-primary-hover);}

/* элементы, создаваемые редактором */
.draggable{
  position:absolute;
  cursor:move;
  box-sizing:border-box;
  border:0 solid transparent;
  border-radius:0;
  box-shadow:none;
}
.draggable.dragging{cursor:move;background:rgba(0,0,0,.1);}
.draggable.resizing{cursor:nwse-resize;background:rgba(0,0,0,.1);}
.selected{
  outline:2px dashed var(--color-primary);
}

#groupSelectBox{
  position:absolute;
  border:2px dashed var(--color-primary);
  pointer-events:none;
  display:none;
  box-sizing:border-box;
}

.draggable .resize-handle{
  position:absolute;
  width:0.5rem;
  height:0.5rem;
  background:#fff;
  border:1px solid var(--color-primary);
  box-sizing:border-box;
  display:none;
}
.draggable.selected .resize-handle{display:block;}
.resize-handle[data-dir="nw"]{left:-0.25rem;top:-0.25rem;cursor:nwse-resize;}
.resize-handle[data-dir="ne"]{right:-0.25rem;top:-0.25rem;cursor:nesw-resize;}
.resize-handle[data-dir="sw"]{left:-0.25rem;bottom:-0.25rem;cursor:nesw-resize;}

.resize-handle[data-dir="se"]{right:-0.25rem;bottom:-0.25rem;cursor:nwse-resize;}

/* базовые блоки */
.block-text{
  padding:0.25rem;
  color:#333;
  min-width:100px;
  min-height:30px;
}

.block-header{
  padding:0.25rem;
  color:#333;
  font-size:1.5rem;
  font-weight:bold;
  min-width:120px;
  min-height:40px;
}

.block-button{
  display:inline-block;
  padding:0.375rem 0.75rem;
  background:var(--color-primary);
  color:var(--color-text);
  border-radius:var(--radius);
  transition:background-color .2s;
  min-width:80px;
  text-align:center;
}
.block-button:hover{background:var(--color-primary-hover);}

.block-image{
  border:2px solid var(--color-panel);
  box-shadow:var(--shadow);
  width:150px;
  height:150px;
}

.block-image img{
  width:100%;
  height:100%;
  object-fit:contain;
}

.toolbar-btn{
  padding:0.3125rem;
  min-width:1.75rem;
}

/* верхняя панель */
#topBar{
  padding:0.375rem 0.75rem;
  background:var(--color-panel);
  display:flex;
  gap:0.5rem;
  align-items:center;
  color:var(--color-text);
  box-shadow:var(--shadow);
}
#topBar button{
  padding:0.25rem 0.5rem;
  display:flex;
  align-items:center;
  gap:0.25rem;
}

/* панель страниц */
#pagesBar{
  margin-left:2rem;
  display:flex;
  gap:0.25rem;
  background:var(--color-panel);
  padding:0.25rem 0.5rem;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  color:var(--color-text);
}

#pagesBar select{
  padding:0.25rem 0.375rem;
  border:1px solid #555;
  border-radius:var(--radius);
  background:var(--color-panel);
  color:var(--color-text);
}

#pageSelect option.active{
  font-weight:bold;
  color:var(--color-primary);
}

#pagesBar button{
  padding:0.25rem 0.5rem;
}

/* боковая мини-панель */
.toolbar{
  position:absolute;
  right:20px;
  top:70px;
  display:flex;
  flex-direction:column;
  gap:0.375rem;
  z-index:9999;
  background:var(--color-panel);
  border:1px solid var(--color-primary-hover);
  border-radius:var(--radius);
  padding:0.375rem;
  box-shadow:var(--shadow);
  font-size:13px;
  color:var(--color-text);
  opacity:0;
  transform:scale(.95);
  pointer-events:none;
  transition:opacity .2s, transform .2s;
}
.toolbar.open{
  opacity:1;
  transform:scale(1);
  pointer-events:auto;
}
.toolbar button{
  padding:0.3125rem;
  min-width:1.75rem;
}

.inline-toolbar{
  position:absolute;
  right:auto;
  top:auto;
  flex-direction:row;
  gap:0.25rem;
  padding:0.25rem;
  font-size:0.75rem;
  background:var(--color-panel);
}
.inline-toolbar input[type="color"]{
  width:1.2rem;
  height:1.2rem;
}

.panel-title{
  background:var(--color-panel);
  border:1px solid #555;
  border-radius:var(--radius);
  padding:0.25rem 0.375rem;
  margin:-0.375rem -0.375rem 0.375rem -0.375rem;
  font-size:1.1rem;
  text-align:center;
  color:var(--color-text);
  position:sticky;
  top:-0.375rem;
  z-index:1;
}

#colorPick{
  border:1px solid #777;
  border-radius:var(--radius);
  width:2rem;
  height:1.4375rem;
  padding:0;
  background:var(--color-bg);
}

/* левая панель блоков */
#blocksBar{
  left:20px;
  right:auto;
}

.block-item{
  display:flex;
  align-items:center;
  gap:0.25rem;
  padding:0.25rem 0.375rem;
  border:1px solid #555;
  border-radius:var(--radius);
  background:rgba(255,255,255,0.1);
  cursor:grab;
  user-select:none;
}
.block-item:active{cursor:grabbing;}
.block-item i{width:1rem;text-align:center;}
.block-item span{pointer-events:none;}

/* панель слоёв */
#layersPanel{
  left:170px;
  right:auto;
  width:140px;
  top:80px;
}

#layersList{
  max-height:200px;
  overflow-y:auto;
}

#layersList li.selected{
  background:var(--color-primary);
  color:#fff;
}

/* панель конфигурации */
#configPanel{
  position:absolute;
  left:50%;
  top:80px;
  transform:translateX(-50%) scale(.95);
  background:var(--color-panel);
  color:var(--color-text);
  border:1px solid rgba(0,0,0,0.2);
  border-radius:var(--radius);
  padding:0.625rem;
  box-shadow:var(--shadow);
  z-index:10000;
  opacity:0;
  pointer-events:none;
  transition:opacity .2s, transform .2s;
}
#configPanel.open{
  opacity:1;
  transform:translateX(-50%) scale(1);
  pointer-events:auto;
}
#configPanel label{display:block;margin:0.25rem 0;}

@media (max-width: 600px){
  #configPanel{
    left:0;
    transform:none;
    width:100%;
  }
}

/* панель свойств */
#propsPanel{
  right:20px;
  top:80px;
}
#propsPanel label{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:0.25rem;
}
#propsPanel input[type="number"]{
  width:60px;
}
#propsPanel input[type="color"]{
  width:60px;
  padding:0;
  border:none;
}
#propsPanel select{
  flex:1;
}
#propsPanel input[type="checkbox"]{
  margin-left:4px;
}
